<html>
	<head>
		<meta charset="utf-8" />
		<title>CSV Layer</title>
		<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" href="http://js.arcgis.com/3.14/esri/css/esri.css">
		<script src="http://js.arcgis.com/3.14compact"></script>
		<style> html, body, #map { width: 100%; height: 100%; padding: 0px; margin: 0px;} </style>
	</head>

    <body>

        <div id="map"> </div>

        <script>

            require([
            "esri/map",
            "esri/layers/CSVLayer",
            "esri/symbols/PictureMarkerSymbol",
            "esri/renderers/SimpleRenderer",
            "dojo/domReady!"
            ],
            function(Map, CSVLayer, PictureMarkerSymbol, SimpleRenderer) {

                var map = new Map("map", {
                   basemap: "gray",
                   center: [-0.122, 51.514], // longitude, latitude
                   zoom: 13
                 });

                var layer = new CSVLayer("csv/borisbikes.csv", {
                  fields: [{name: "mag", type: "String"}, {name: "empty_docks", type: "Number"}]
                });

                var logo = new PictureMarkerSymbol("imgs/logo.png", 16, 11); // Define a marker image
                var simpleRenderer = new SimpleRenderer(logo); // Define a new renderer
                layer.setRenderer(simpleRenderer); //Set the simple point renderer to the feature layer

                map.addLayer(layer);

             });

        </script>
    </body>
</html>
