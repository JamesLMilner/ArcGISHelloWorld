<!DOCTYPE html>
<html>

    <head>
        <meta http-equiv='Content-type' content='text/html; charset=utf-8'>
        <title>Esri KML Layer ExampleX</title>
        <link rel="stylesheet" href="http://js.arcgis.com/3.13/esri/css/esri.css">
        <script src="http://js.arcgis.com/3.13"></script>
        <style> html, body, #map { width: 100%; height: 100%; padding: 0px; margin: 0px;} </style>

    </head>

    <body>
        <div id="map"></div>
        <script>
            // This demo will only work on a web server ! (i.e. localhost)
            require([
            "esri/map",
            "esri/layers/KMLLayer",
            "dojo/domReady!"
            ],
            function(Map, KMLLayer) {


                var map = new Map("map", {
                   basemap: "gray",
                   center: [0, 30], // longitude, latitude
                   zoom: 4
                 });

                // A KML Layer: We must explicitly state the full URL (relative URLs will throw errors!)
                var layer = new KMLLayer("http://www.loxodrome.io/demos/kmllayers/samplekml.kml", {  });
                layer.on("load", function() {
                    var layers = layer.getLayers()
                    console.log(layers);
                });

                map.addLayer(layer); // Add the layer to the map


            });
        </script>
    </body>

</html>
